<ion-header no-border>
  <ion-toolbar class="page-header">
    <ion-item lines="none" class="title-item" class="ion-no-padding">
      <ion-back-button defaultHref="tabs/safety-plan" slot="start" class="ion-no-margin"></ion-back-button>
      <ion-label class="page-title" style="margin-top: 10px;">Resources</ion-label>
    </ion-item>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div *ngIf="(favouriteResources$ | async)?.length > 0">
    <h4>Favourites</h4>
    <ion-card class="brainstorm-card m-1">
      <ion-card-content>
        <ion-list>
          <ion-item-sliding class="ion-no-padding pl-0" *ngFor="let favouriteResource of favouriteResources$ | async">
        
            <ion-item (click)="displayInfo(favouriteResource.resource.id)">
              <ion-avatar slot="start" class="border">
                <img src="{{favouriteResource.resource.img_url}}">
              </ion-avatar>
              <ion-label class="ion-text-wrap">
                <h2>
                  {{favouriteResource.resource.title}}
                  <ion-text color="warning"><ion-icon name="star"></ion-icon></ion-text>
                </h2>
                <small>{{favouriteResource.resource.description.substring(0,50) + "..."}}</small>
              </ion-label>
            </ion-item>
        
            <ion-item-options side="end">
              <ion-item-option color="warning" (click)="unfavourite(favouriteResource.id)"><ion-icon name="star-outline"></ion-icon></ion-item-option>
            </ion-item-options>
          </ion-item-sliding>
        </ion-list>
      </ion-card-content>
    </ion-card>
    <h4>Other Resources</h4>
  </div>
  <ion-card class="brainstorm-card m-1">
    <ion-card-content>
      <ion-list>
        <ion-item-sliding class="ion-no-padding" *ngFor="let resource of  otherResources$ | async">
      
          <ion-item (click)="displayInfo(resource.id)">
            <ion-avatar slot="start" class="border">
              <img src="{{resource.img_url}}">
            </ion-avatar>
            <ion-label class="ion-text-wrap">
              <h2>
                {{resource.title}}
              </h2>
              <small>{{resource.description.substring(0,50) + "..."}}</small>
            </ion-label>
          </ion-item>
      
          <ion-item-options side="end">
            <ion-item-option color="warning" (click)="favourite(resource.id)"><ion-icon class="mx-2" name="star"></ion-icon></ion-item-option>
          </ion-item-options>
        </ion-item-sliding>
      </ion-list>
    </ion-card-content>
  </ion-card>
</ion-content>
